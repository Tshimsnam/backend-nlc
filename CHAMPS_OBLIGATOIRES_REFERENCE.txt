â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘              ğŸ“‹ CHAMPS OBLIGATOIRES POUR GÃ‰NÃ‰RER UNE RÃ‰FÃ‰RENCE               â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ ENDPOINT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST /api/events/{event_id}/register

Exemple: POST http://192.168.58.9:8000/api/events/1/register


âœ… CHAMPS OBLIGATOIRES (5)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. event_price_id
   Type: integer
   RÃ¨gle: Doit exister dans la table event_prices
   Exemple: 2
   Description: ID du tarif sÃ©lectionnÃ© (Ã©tudiant, mÃ©decin, etc.)

2. full_name
   Type: string
   RÃ¨gle: Minimum 3 caractÃ¨res, Maximum 255
   Exemple: "Franck Kapuya"
   Description: Nom complet du participant

3. email
   Type: email
   RÃ¨gle: Format email valide, Maximum 255
   Exemple: "franckkapuya13@gmail.com"
   Description: Email du participant

4. phone
   Type: string
   RÃ¨gle: Minimum 9 caractÃ¨res, Maximum 50
   Exemple: "+243822902681"
   Description: NumÃ©ro de tÃ©lÃ©phone du participant

5. pay_type
   Type: string
   RÃ¨gle: Valeurs acceptÃ©es: "online" ou "cash"
   Exemple: "online"
   Description: Mode de paiement choisi


âŒ CHAMPS OPTIONNELS (5)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. days
   Type: integer
   DÃ©faut: 1
   Exemple: 1
   Description: Nombre de jours de participation

2. pay_sub_type
   Type: string
   DÃ©faut: null
   Exemple: "mobile_money"
   Description: Sous-type de paiement (optionnel)

3. success_url
   Type: url
   DÃ©faut: Depuis .env
   Exemple: "https://nlc-maxicash-rdc.loca.lt/paiement/success"
   Description: URL de redirection aprÃ¨s succÃ¨s

4. cancel_url
   Type: url
   DÃ©faut: Depuis .env
   Exemple: "https://nlc-maxicash-rdc.loca.lt/paiement/cancel"
   Description: URL de redirection aprÃ¨s annulation

5. failure_url
   Type: url
   DÃ©faut: Depuis .env
   Exemple: "https://nlc-maxicash-rdc.loca.lt/paiement/failure"
   Description: URL de redirection aprÃ¨s Ã©chec


ğŸ“ PAYLOAD MINIMAL (RECOMMANDÃ‰)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{
  "event_price_id": 2,
  "full_name": "Franck Kapuya",
  "email": "franckkapuya13@gmail.com",
  "phone": "+243822902681",
  "pay_type": "online"
}


ğŸ”„ GÃ‰NÃ‰RATION AUTOMATIQUE DE LA RÃ‰FÃ‰RENCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

La rÃ©fÃ©rence est gÃ©nÃ©rÃ©e AUTOMATIQUEMENT par le backend:

MÃ©thode: strtoupper(Str::random(10))
Format: 10 caractÃ¨res alphanumÃ©riques en majuscules
Exemples: 
  - T5AECQ2T4W
  - XQECJYUN4O
  - P0VKBZWQ2L
  - JLU4ICAHEZ

Vous N'AVEZ PAS BESOIN de fournir la rÃ©fÃ©rence dans le payload!


ğŸ“Š CHAMPS REMPLIS AUTOMATIQUEMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ces champs sont remplis par le backend:

âœ“ event_id         â†’ Depuis l'URL (/api/events/{event_id}/register)
âœ“ reference        â†’ GÃ©nÃ©rÃ© automatiquement (10 caractÃ¨res)
âœ“ category         â†’ Depuis EventPrice (etudiant, medecin, etc.)
âœ“ amount           â†’ Depuis EventPrice (15.00, 50.00, etc.)
âœ“ currency         â†’ Depuis EventPrice (USD, etc.)
âœ“ payment_status   â†’ "pending" (online) ou "pending_cash" (cash)
âœ“ gateway_log_id   â†’ Depuis MaxiCash (aprÃ¨s initiation paiement)


âœ… RÃ‰PONSE ATTENDUE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

HTTP 201 Created

{
  "success": true,
  "payment_mode": "online",
  "reference": "T5AECQ2T4W",           â† RÃ‰FÃ‰RENCE GÃ‰NÃ‰RÃ‰E
  "redirect_url": "https://api-testbed.maxicashapp.com/payentryweb?logid=97761",
  "log_id": "97761",
  "message": "Redirection vers MaxiCash pour finaliser le paiement"
}


âŒ ERREURS POSSIBLES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

HTTP 422 Unprocessable Entity

Champ manquant:
{
  "message": "Le nom complet est obligatoire",
  "errors": {
    "full_name": ["Le nom complet est obligatoire"]
  }
}

Champ invalide:
{
  "message": "L'email doit Ãªtre valide",
  "errors": {
    "email": ["L'email doit Ãªtre valide"]
  }
}

event_price_id inexistant:
{
  "message": "Le tarif sÃ©lectionnÃ© n'existe pas",
  "errors": {
    "event_price_id": ["Le tarif sÃ©lectionnÃ© n'existe pas"]
  }
}


ğŸ§ª TESTER LA GÃ‰NÃ‰RATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Avec cURL:
curl -X POST http://192.168.58.9:8000/api/events/1/register \
  -H "Content-Type: application/json" \
  -d '{
    "event_price_id": 2,
    "full_name": "Franck Kapuya",
    "email": "franckkapuya13@gmail.com",
    "phone": "+243822902681",
    "pay_type": "online"
  }'

Avec le script PHP:
php test-api-inscription.php


ğŸ“š DOCUMENTATION COMPLÃˆTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Consultez: GENERATION_REFERENCE_TICKET.md


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘                    ğŸ“‹ RÃ‰SUMÃ‰: 5 CHAMPS OBLIGATOIRES                          â•‘
â•‘                                                                              â•‘
â•‘  1. event_price_id (integer)                                                 â•‘
â•‘  2. full_name (string, min: 3)                                               â•‘
â•‘  3. email (email valide)                                                     â•‘
â•‘  4. phone (string, min: 9)                                                   â•‘
â•‘  5. pay_type ("online" ou "cash")                                            â•‘
â•‘                                                                              â•‘
â•‘  â†’ La rÃ©fÃ©rence est gÃ©nÃ©rÃ©e AUTOMATIQUEMENT par le backend                   â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
