<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur QR Code - NLC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    <div class="max-w-2xl w-full bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">G√©n√©rateur QR Code</h1>
        <p class="text-gray-600 mb-8">√âv√©nement: Le trouble du spectre autistique et la scolarit√©</p>

        <!-- URL -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">URL de l'√©v√©nement</label>
            <input 
                type="text" 
                id="eventUrl" 
                value="https://www.nlcrdc.org/evenements/le-grand-salon-de-lautisme"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                readonly
            >
        </div>

        <!-- QR Code Display -->
        <div class="flex flex-col items-center mb-6">
            <div id="qrcode" class="bg-white p-4 rounded-lg border-2 border-gray-200"></div>
        </div>

        <!-- Actions -->
        <div class="flex gap-4">
            <button 
                onclick="downloadQR()" 
                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition"
            >
                üì• T√©l√©charger PNG
            </button>
            <button 
                onclick="printQR()" 
                class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg transition"
            >
                üñ®Ô∏è Imprimer
            </button>
        </div>

        <!-- Instructions -->
        <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
            <h3 class="font-bold text-blue-900 mb-2">üì± Comment √ßa fonctionne ?</h3>
            <ol class="list-decimal list-inside text-sm text-blue-800 space-y-1">
                <li>Les utilisateurs scannent ce QR code</li>
                <li>Ils sont redirig√©s vers la page de l'√©v√©nement</li>
                <li>Le scan est automatiquement enregistr√©</li>
                <li>Les statistiques apparaissent dans le dashboard admin</li>
            </ol>
        </div>

        <!-- Stats Info -->
        <div class="mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4">
            <h3 class="font-bold text-gray-900 mb-2">üìä Statistiques Track√©es</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                <li>Nombre total de scans</li>
                <li>Type d'appareil (Mobile, Desktop, Tablet)</li>
                <li>Date et heure de chaque scan</li>
                <li>Adresse IP (pour √©viter les doublons)</li>
            </ul>
        </div>
    </div>

    <script>
        // G√©n√©rer le QR Code
        const url = document.getElementById('eventUrl').value;
        const qrcode = new QRCode(document.getElementById("qrcode"), {
            text: url,
            width: 300,
            height: 300,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });

        // T√©l√©charger le QR Code
        function downloadQR() {
            const canvas = document.querySelector('#qrcode canvas');
            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'qr-code-nlc-event.png';
            link.href = url;
            link.click();
        }

        // Imprimer le QR Code
        function printQR() {
            const printWindow = window.open('', '', 'height=600,width=800');
            const canvas = document.querySelector('#qrcode canvas');
            const imgUrl = canvas.toDataURL('image/png');
            
            printWindow.document.write('<html><head><title>QR Code - NLC</title>');
            printWindow.document.write('<style>body{text-align:center;padding:20px;font-family:Arial,sans-serif;}</style>');
            printWindow.document.write('</head><body>');
            printWindow.document.write('<h1>Le trouble du spectre autistique et la scolarit√©</h1>');
            printWindow.document.write('<p>Scannez ce code pour acc√©der √† l\'√©v√©nement</p>');
            printWindow.document.write('<img src="' + imgUrl + '" style="max-width:400px;margin:20px auto;"/>');
            printWindow.document.write('<p style="font-size:12px;color:#666;">www.nlcrdc.org</p>');
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.print();
        }
    </script>
</body>
</html>
